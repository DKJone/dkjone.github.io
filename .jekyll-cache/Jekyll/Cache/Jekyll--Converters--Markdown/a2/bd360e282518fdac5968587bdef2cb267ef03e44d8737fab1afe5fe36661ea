I"ó9<h1 id="xcodeå¸¸è§é”™è¯¯å¤„ç†">xcodeå¸¸è§é”™è¯¯å¤„ç†</h1>
<p>æ›´åŠ è¯¦ç»†çš„å†…å®¹ä¼šåŒæ­¥æ›´æ–°åœ¨GitHubé¡¹ç›®<a href="https://github.com/DKJone/ios-Tips">ios-Tips</a>ä¸­</p>

<h1 id="xcode-åœ¨ocswiftæ··ç¼–æ—¶æŠ¥é”™é”™è¯¯å†…å®¹">Xcode åœ¨OCã€swiftæ··ç¼–æ—¶æŠ¥é”™é”™è¯¯å†…å®¹</h1>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>missing required module 'CommonCrypto'
</code></pre></div></div>
<h4 id="å‡ºé”™åŸå› ">å‡ºé”™åŸå› ï¼š</h4>
<p>`
ç”±äºè‹¹æœçš„Cè¯­è¨€åº“åœ¨swiftä¸­æ²¡æœ‰å¯¹åº”çš„frameworkï¼Œæ‰€ä»¥OCæ¡†æ¶åœ¨ä½¿ç”¨cè¯­è¨€åº“åä½œä¸ºå¤–éƒ¨æ¡†æ¶å¯¼å…¥åæ‰¾ä¸åˆ°åŸcè¯­è¨€æ¡†æ¶
`</p>
<h4 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h4>
<p>`
æ–°å»ºå¯¹åº”çš„è™šæ‹ŸFrameworkï¼ˆåœ¨æ­¤ä½¿ç”¨è„šæœ¬è‡ªåŠ¨ç”Ÿæˆæ¨¡å—å¹¶æ˜ å°„æ­£ç¡®çš„Xcode/SDKè·¯å¾„ï¼‰ï¼Œç„¶ååŠ å…¥åˆ°é¡¹ç›®ä¾èµ–ä¸­ï¼ŒæŠ¤ä½“æ–¹æ³•å¦‚ä¸‹
`</p>
<ol>
  <li>é€‰æ‹©xcodeå·¥ç¨‹æ–‡ä»¶</li>
  <li>é€‰æ‹©<code class="language-plaintext highlighter-rouge">info</code>é€‰é¡¹</li>
  <li>æ·»åŠ <code class="language-plaintext highlighter-rouge">target</code>-&gt;<code class="language-plaintext highlighter-rouge">Aggregate</code></li>
  <li>æ·»åŠ Scriptå°†å¦‚ä¸‹è„šæœ¬ç²˜è´´åˆ°å›¾ç¤ºå¤„
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> <span class="s2">"</span><span class="k">${</span><span class="nv">BUILT_PRODUCTS_DIR</span><span class="k">}</span><span class="s2">/CommonCryptoModuleMap"</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; "</span><span class="k">${</span><span class="nv">BUILT_PRODUCTS_DIR</span><span class="k">}</span><span class="sh">/CommonCryptoModuleMap/module.modulemap"
module CommonCrypto [system] {
 header "</span><span class="k">${</span><span class="nv">SDKROOT</span><span class="k">}</span><span class="sh">/usr/include/CommonCrypto/CommonCrypto.h"
 export *
}
</span><span class="no">EOF
</span></code></pre></div>    </div>
  </li>
  <li>é€‰æ‹©<code class="language-plaintext highlighter-rouge">Build Phases</code>é€‰é¡¹ï¼Œå°†CommonCryptoæ¡†æ¶æ·»åŠ åˆ°<code class="language-plaintext highlighter-rouge">Target Dependencies</code><br />
<img src="https://github.com/DKJone/ios-Tips/tree/master/images/img_01.png" alt="image" />
<img src="https://github.com/DKJone/ios-Tips/tree/master/images/img_02.png" alt="image" /></li>
</ol>

<h1 id="blydatamanageré”™è¯¯å¯¼è‡´appåœ¨å‘å¸ƒåios93ä¸€ä¸‹ç³»ç»Ÿå¼‚å¸¸å´©æºƒ">BLYDataManageré”™è¯¯å¯¼è‡´appåœ¨å‘å¸ƒåIOS9.3ä¸€ä¸‹ç³»ç»Ÿå¼‚å¸¸å´©æºƒ</h1>

<p>ios ipaæµ‹è¯•æ—¶æ²¡ä»»ä½•é—®é¢˜ä½†æ˜¯ä¸Šä¼ AppStoreåä¼šåœ¨iOS 9ä¸Šå‡ºç°å´©æºƒ
ä¸‹é¢æ˜¯è…¾è®¯buglyç»™çš„å´©æºƒä¿¡æ¯</p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">BLYDataManager</span> <span class="nf">persistData</span><span class="p">:</span><span class="nf">ofType</span><span class="p">:</span><span class="n">enableNotifications</span><span class="o">:</span><span class="n">withCompletionBlock</span><span class="o">:</span><span class="p">]</span><span class="n">_block_invoke</span>
<span class="n">EXC_BAD_ACCESS</span>

</code></pre></div></div>
<h4 id="å‡ºé”™åŸå› -1">å‡ºé”™åŸå› ï¼š</h4>
<blockquote>
  <h3 id="åœ¨xcode8ä¸­å¦‚æœä½ çš„å›¾ç‰‡èµ„æºæ–‡ä»¶é‡Œæœ‰16ä½å›¾æˆ–è€…å›¾ç‰‡æ˜¾ç¤ºæ¨¡å¼ä¸ºp3å¹¶ä¸”deployment-targetæ˜¯ios93ä»¥ä¸‹çš„å°±ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜è¯è¯´æˆ‘å…¬å¸çš„é¡¹ç›®é‡Œé¢å°±å‡ºç°äº†ä¸€ä¸ªå°æŒ‰é’®å¯¼è‡´äº†è¿™æ¬¡å´©æºƒä¸çŸ¥é“è®¾è®¡å¸ˆæ˜¯æ€ä¹ˆå¼„å‡ºæ¥çš„è¿™ä¸ªç‰¹æ®Šå›¾ç‰‡å¦‚æœä½ çš„appéœ€è¦æ”¯æŒwide-color-functionalityé‚£ä½ å°±å¿…é¡»è®¾ç½®deployment-targetä¸ºios93ä»¥ä¸Šå¦‚æœä½ çš„appä¸éœ€è¦æ”¯æŒwide-color-functionalityå¹¶ä¸”ä½ å¸Œæœ›å…¼å®¹iosè€ç‰ˆæœ¬é‚£ä¹ˆä½ éœ€è¦å°†æ‰€æœ‰16-bit-or-p3-assetsçš„å›¾ç‰‡è½¬æ¢ä¸º8-bit-srgb-assets">åœ¨Xcode8ä¸­ï¼Œå¦‚æœä½ çš„å›¾ç‰‡èµ„æºæ–‡ä»¶é‡Œæœ‰16ä½å›¾æˆ–è€…å›¾ç‰‡æ˜¾ç¤ºæ¨¡å¼ä¸ºP3ï¼Œå¹¶ä¸”Deployment Targetæ˜¯iOS9.3ä»¥ä¸‹çš„å°±ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚ï¼ˆè¯è¯´æˆ‘å…¬å¸çš„é¡¹ç›®é‡Œé¢å°±å‡ºç°äº†ä¸€ä¸ªå°æŒ‰é’®ï¼Œå¯¼è‡´äº†è¿™æ¬¡å´©æºƒï¼Œä¸çŸ¥é“è®¾è®¡å¸ˆæ˜¯æ€ä¹ˆå¼„å‡ºæ¥çš„è¿™ä¸ªç‰¹æ®Šå›¾ç‰‡â€¦ï¼‰å¦‚æœä½ çš„Appéœ€è¦æ”¯æŒwide color functionalityï¼Œé‚£ä½ å°±å¿…é¡»è®¾ç½®Deployment Targetä¸ºiOS9.3ä»¥ä¸Šã€‚å¦‚æœä½ çš„APPä¸éœ€è¦æ”¯æŒwide color functionalityå¹¶ä¸”ä½ å¸Œæœ›å…¼å®¹iOSè€ç‰ˆæœ¬ï¼Œé‚£ä¹ˆä½ éœ€è¦å°†æ‰€æœ‰16-bit or P3 assetsçš„å›¾ç‰‡è½¬æ¢ä¸º8-bit sRGB assets</h3>
</blockquote>

<h4 id="è§£å†³æ–¹æ³•-1">è§£å†³æ–¹æ³•</h4>
<ol>
  <li>æ‰“ä¸€ä¸ªipaåŒ…ï¼Œè§£å‹ä½ çš„åº”ç”¨çš„ipaåŒ…ï¼Œè¿›å…¥åˆ°ä½ åº”ç”¨çš„Playloadæ–‡ä»¶å¤¹ã€‚</li>
  <li>ç”¨findå‘½ä»¤å®šä½åˆ°Assets.caræ–‡ä»¶
find . -name â€˜Assets.carâ€™</li>
  <li>ä½¿ç”¨ assetutil å‘½ä»¤å¯¼å‡ºå›¾ç‰‡çš„ä¿¡æ¯å­˜å‚¨åˆ°Assets.jsonæ–‡ä»¶ä¸­
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>xcrun <span class="nt">--sdk</span> iphoneos assetutil <span class="nt">--info</span> <span class="o">{</span>Assets.carè·¯å¾„<span class="o">}</span> <span class="o">&gt;</span> /tmp/Assets.json
//ç¤ºä¾‹ï¼š
<span class="nb">sudo </span>xcrun <span class="nt">--sdk</span> iphoneos assetutil <span class="nt">--info</span> ./abc.app/Assets.car <span class="o">&gt;</span> /tmp/Assets.json
</code></pre></div>    </div>
  </li>
  <li>æ‰“å¼€åˆšæ‰ç”Ÿæˆçš„Assets.jsonæ–‡ä»¶ï¼ŒæŸ¥æ‰¾å«æœ‰<code class="language-plaintext highlighter-rouge">"DisplayGamut" : "P3"</code>çš„å†…å®¹ã€‚è¿™ä¸ªå¯¹åº”çš„Nameå°±æ˜¯å‡ºç°é—®é¢˜çš„å›¾ç‰‡äº†ã€‚
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>open /tmp/Assets.json
</code></pre></div>    </div>
    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
 </span><span class="nl">"Compression"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"lzfse"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"BitsPerSample"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w">
 </span><span class="nl">"LayoutDirection"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"0 - Horizontal"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"AssetType"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Image"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"ColorModel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"RGB"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"Name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"CRM_msg_unread"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"PixelWidth"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">90</span><span class="p">,</span><span class="w">
 </span><span class="nl">"Graphics"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"GLES2,0"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"Subtype"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
 </span><span class="nl">"PixelHeight"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">90</span><span class="p">,</span><span class="w">
 </span><span class="nl">"SizeClass Horizontal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"universal"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"EdgeInsets"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"top:0 left:0 bottom:0 right:0"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"Scale"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="nl">"Memory"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"512MB"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"Opaque"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
 </span><span class="nl">"DisplayGamut"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"P3"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"Idiom"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"universal"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"Encoding"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ARGB-16"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"Image Type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"kCoreThemeOnePartScale"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"SizeClass Vertical"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"universal"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>æ‰¾åˆ°å¯¹åº”çš„å›¾ç‰‡ï¼Œä½¿ç”¨macè‡ªå¸¦çš„é¢„è§ˆæ‰“å¼€ï¼Œç¼–è¾‘å›¾ç‰‡åä¿å­˜å°±å¯ä»¥å°†å›¾ç‰‡ä¿å­˜æˆæ­£ç¡®çš„æ ¼å¼</li>
  <li>é™¤äº†ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨bash scriptç›´æ¥å¤„ç†æ‰€æœ‰å›¾ç‰‡ä¸ºæ­£ç¡®æ ¼å¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨å»å®šä½æ˜¯å“ªä¸ªå›¾ç‰‡çš„é—®é¢˜äº†ï¼Œæˆ–è®¸æ›´æ–¹ä¾¿ä¸€äº›
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nv">DIRECTORY</span><span class="o">=</span><span class="nv">$1</span>
<span class="nb">echo</span> <span class="s2">"------------------------------"</span>
<span class="nb">echo</span> <span class="s2">"Passed Resources with xcassets folder argument is &lt;</span><span class="nv">$DIRECTORY</span><span class="s2">&gt;"</span>
<span class="nb">echo</span> <span class="s2">"------------------------------"</span>
<span class="nb">echo</span> <span class="s2">"Processing asset:"</span>
<span class="nv">XSAASSETSD</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span>find <span class="s2">"</span><span class="nv">$DIRECTORY</span><span class="s2">"</span> <span class="nt">-name</span> <span class="s1">'*.xcassets'</span><span class="si">)</span><span class="s2">"</span>
<span class="k">for </span>xcasset <span class="k">in</span> <span class="nv">$XSAASSETSD</span>
<span class="k">do
 </span><span class="nb">echo</span> <span class="s2">"---</span><span class="nv">$xcasset</span><span class="s2">"</span>
 <span class="nv">IMAGESETS</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span>find <span class="s2">"</span><span class="nv">$xcasset</span><span class="s2">"</span> <span class="nt">-name</span> <span class="s1">'*.imageset'</span><span class="si">)</span><span class="s2">"</span>
 <span class="k">for </span>imageset <span class="k">in</span> <span class="nv">$IMAGESETS</span>
 <span class="k">do
     </span><span class="nb">echo</span> <span class="s2">"------</span><span class="nv">$imageset</span><span class="s2">"</span>
     <span class="nv">FILES</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span>find <span class="s2">"</span><span class="nv">$imageset</span><span class="s2">"</span> <span class="nt">-name</span> <span class="s1">'*.png'</span><span class="si">)</span><span class="s2">"</span>
     <span class="k">for </span>file <span class="k">in</span> <span class="nv">$FILES</span> 
     <span class="k">do
         </span><span class="nb">echo</span> <span class="s2">"---------</span><span class="nv">$file</span><span class="s2">"</span>
         sips <span class="nt">-m</span> <span class="s2">"/System/Library/Colorsync/Profiles/sRGB Profile.icc"</span> <span class="nv">$file</span> <span class="nt">--out</span> <span class="nv">$file</span>
     <span class="k">done
 done
done
</span><span class="nb">echo</span> <span class="s2">"------------------------------"</span>
<span class="nb">echo</span> <span class="s2">"script successfully finished"</span>
<span class="nb">echo</span> <span class="s2">"------------------------------"</span>
</code></pre></div>    </div>
  </li>
</ol>

<h1 id="ipad-alertcontrollerå´©æºƒ">ipad alertControllerå´©æºƒ</h1>

<p>åŒæ ·çš„ UIAlertController åœ¨iPhoneä¸Šè¿è¡Œæ—¶æ­£å¸¸ï¼Œè€Œåˆ‡æ¢åˆ°iPadä¸Šåå‘ç”Ÿå´©æºƒ</p>

<h4 id="å‡ºé”™åŸå› -2">å‡ºé”™åŸå› ï¼š</h4>
<blockquote>
  <h3 id="åœ¨ipadä¸Šactionsheetä¼šè¢«ä»¥popoverçš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥å®ƒè¡£æœåœ¨å½“å‰é¡µé¢çš„æŸä¸€ä¸ªç»„ä»¶ä¸Šå› ä¸ºå¿…é¡»æŒ‡å®šä¸€ä¸ªsourceviewç”¨äºæŒ‡å®šactionsheetçš„ä¾é™„ç‚¹åœ¨è¿™ä¸ªç©ºé—´çš„å‘¨å›´è¢«å¼¹å‡ºåŒæ—¶è¿˜åº”æŒ‡å®šä¸€ä¸ªsourcerectç”¨äºæŒ‡å®šä»–è¢«åŒ…å«åœ¨å“ªä¸€ç‰‡åŒºåŸŸå†…">åœ¨iPadä¸Šï¼ŒActionSheetä¼šè¢«ä»¥popoverçš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥ï¼Œå®ƒè¡£æœåœ¨å½“å‰é¡µé¢çš„æŸä¸€ä¸ªç»„ä»¶ä¸Šï¼Œå› ä¸ºå¿…é¡»æŒ‡å®šä¸€ä¸ªsourceViewç”¨äºæŒ‡å®šActionSheetçš„ä¾é™„ç‚¹ï¼ˆåœ¨è¿™ä¸ªç©ºé—´çš„å‘¨å›´è¢«å¼¹å‡ºï¼‰ï¼ŒåŒæ—¶è¿˜åº”æŒ‡å®šä¸€ä¸ªsourceRectç”¨äºæŒ‡å®šä»–è¢«åŒ…å«åœ¨å“ªä¸€ç‰‡åŒºåŸŸå†…</h3>
</blockquote>

<h4 id="è§£å†³æ–¹æ³•-2">è§£å†³æ–¹æ³•</h4>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//ipadä½¿ç”¨ï¼Œä¸åŠ ipadä¸Šä¼šå´©æºƒ</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">popoverController</span> <span class="o">=</span> <span class="n">alertController</span><span class="o">.</span><span class="n">popoverPresentationController</span> <span class="p">{</span>
            <span class="n">popoverController</span><span class="o">.</span><span class="n">sourceView</span> <span class="o">=</span> <span class="n">sender</span>
            <span class="n">popoverController</span><span class="o">.</span><span class="n">sourceRect</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="n">bounds</span>
        <span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p>æ³¨æ„ï¼šå½“ä½ æŠŠä¸€ä¸ªActionçš„ActionStyleè®¾ç½®ä¸ºcancelçš„æ—¶å€™ï¼ŒiPadå°†ä¸ä¼šæ˜¾ç¤ºè¿™ä¸ªAction</p>
</blockquote>
:ET